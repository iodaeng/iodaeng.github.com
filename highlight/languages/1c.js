/*
Language: 1C
Author: Yuri Ivanov <ivanov@supersoft.ru>
Contributors: Sergey Baranov <segyrn@yandex.ru>
*/

hljs.LANGUAGES['1c'] = function(){
  var IDENT_RE_RU = '[a-zA-Z?-??-?][a-zA-Z0-9_?-??-?]*';
  var OneS_KEYWORDS = {'???????':1,'????':1,'???':1,'????':1,'?':1,'???':1,'?????':1,'?????????':1,'??????????':1,'?????????':1,'????????????':1,'??????????????':1,'????????????':1,'??????????':1,'?????????':1,'??':1,'???????':1,'?????':1,'????????????':1,'??':1,'????':1,'???????':1,'????????':1,'??????????':1,'?????????':1,'??????':1,'?????':1,'??':1,'???????':1,'????':1,'?????':1,'???????':1};
  var OneS_BUILT_IN = {'ansitooem':1,'oemtoansi':1,'?????????????????':1,'??????????':1,'??????????????':1,'??????????????????':1,'????????????':1,'????????????????':1,'????????????':1,'???????????':1,'??????':1,'????????????????????':1,'????':1,'???????????????????':1,'?????????????????':1,'???????':1,'?????????':1,'?????????':1,'?????????????':1,'??????????????????????':1,'????????????????':1,'????????????????????????':1,'???????????????????':1,'???????????????????????':1,'???????????????':1,'????????????????????':1,'?????????????':1,'????????????????':1,'?????????????????????':1,'???????????????':1,'?????????????':1,'???????????????':1,'??????????????????????':1,'?????????':1,'???????????????????':1,'????????????????':1,'???????':1,'??????????????':1,'???????':1,'??????????????':1,'???????????????????????????':1,'??????????????????????????':1,'???????????':1,'?????????':1,'?????????':1,'???':1,'???':1,'???10':1,'????':1,'??????????????????????????????':1,'???':1,'????????????????':1,'??????????????????':1,'??????????????????':1,'????????????':1,'?????????????':1,'?????':1,'?????????????????????????':1,'???????????':1,'???????????????':1,'???????????????????????????':1,'????????????????':1,'???????':1,'???????????':1,'?????????':1,'?????????':1,'????????????':1,'??????????????':1,'???????????????':1,'????':1,'?????????????????':1,'???':1,'??????????????':1,'??????????????????????':1,'??????????????????':1,'????????????':1,'????????????':1,'????????????????????':1,'??????????????????':1,'?????????????????????':1,'?????????':1,'?????????????????????':1,'???????????????':1,'??????????????':1,'??????????????????':1,'??????????????????????':1,'?????????????????':1,'??????????????????????':1,'??????????':1,'????':1,'????????????':1,'??????????????':1,'????????????????????':1,'????????????':1,'??????????????':1,'??????????????????????????':1,'??????????':1,'????':1,'????????????':1,'??????????????':1,'????????????????????':1,'????????????':1,'??????????????':1,'???????????':1,'??????????????????':1,'????????????????':1,'????':1,'?????????????????????????':1,'????????????????????':1,'????????????????????':1,'??????':1,'????':1,'???????????????':1,'?????????????':1,'?????':1,'??????':1,'?????':1,' ????????':1,'?????????':1,'?????????????????':1,'????':1,'??????????????':1,'????????':1,'???????????':1,'??????????????????':1,'?????????????????':1,' ?????????????????':1,'????????????????????????????':1,'??????????':1,'???????????':1,'????????????':1,'???????????':1,'??????????????':1,'??????????????':1,'??????????????':1,'??????????????':1,'??????????':1,'??????':1,'???':1,'??????':1};

  return {
    defaultMode: {
      lexems: [IDENT_RE_RU],
      contains: ['comment', 'string', 'function', 'preprocessor', 'number', 'date'],
      keywords: {'keyword':OneS_KEYWORDS,'built_in':OneS_BUILT_IN}
    },
    case_insensitive: true,
    modes: [
      hljs.C_LINE_COMMENT_MODE,
      {
        className: 'string',
        begin: '"', end: '"',
        contains: ['dquote'],
        relevance: 0
      },
      {
        className: 'string',
        begin: '"', end: '$',
        contains: ['dquote']
      },
      {
        className: 'string',
        begin: '\\|', end: '$',
        contains: ['dquote']
      },
      {
        className: 'string',
        begin: '\\|', end: '"',
        contains: ['dquote']
      },
      {
        className: 'date',
        begin: '\'\\d{2}\\.\\d{2}\\.(\\d{2}|\\d{4})\'', end: '^'
      },
      {
        className: 'dquote',
        begin: '""', end: '^'
      },
      {
        className: 'number',
        begin: hljs.NUMBER_RE, end: '^',
        relevance: 0
      },
      {
        className: 'title',
        lexems: [IDENT_RE_RU],
        begin: IDENT_RE_RU, end: '^'
      },
      {
        className: 'params',
        begin: '\\(', end: '\\)',
        lexems: [IDENT_RE_RU],
        keywords: {'????':1},
        contains: ['string']
      },
      {
        className: 'function',
        begin: '(?????????|???????)', end: '$',
        lexems: [IDENT_RE_RU],
        keywords: {'?????????': 1, '???????': 1, '???????': 1},
        contains: ['title','tail','comment'],
        relevance: 0
      },
      {
        className: 'tail',
        begin: '^',  endsWithParent: true,
        lexems: [IDENT_RE_RU],
        contains: ['params', 'export']
      },
      {
        className: 'export',
        begin: '???????', endsWithParent: true,
        lexems: [IDENT_RE_RU],
        keywords: {'???????': 1},
        contains: ['comment']
      },
      {
        className: 'preprocessor',
        begin: '#', end: '$',
        lexems: [IDENT_RE_RU]
      }
    ]
  };
}();
